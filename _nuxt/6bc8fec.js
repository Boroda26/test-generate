(window.webpackJsonp=window.webpackJsonp||[]).push([[12,4],{592:function(t,e,r){var content=r(598);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(68).default)("6dd21d30",content,!0,{sourceMap:!1})},597:function(t,e,r){"use strict";r(592)},598:function(t,e,r){var o=r(67)(!1);o.push([t.i,".image-container{aspect-ratio:1/1;background:#fbfdff}.image-container:hover .image-container__shadow{filter:brightness(.4)}.image-container:hover .image-container__btns{display:flex}.image-container_loader{border:1px dashed #c0ccda}.image-container_loader:hover{border-color:#409eff;cursor:pointer}.image-container__btns{position:absolute;z-index:1;display:none}.image-container__btn{cursor:pointer;opacity:.8;font-size:1.1rem}.image-container__btn:hover{opacity:1}.image-container__img{-o-object-fit:cover;object-fit:cover;width:100%;height:100%;transition:.15s}.image-container__shadow{background:#fbfdff}.image-container__icon{font-size:3rem}",""]),t.exports=o},602:function(t,e,r){"use strict";r.r(e);r(75),r(114),r(24);var o=r(37),n=r(26),c=(r(74),r(1),r(3),r(5),r(238),{props:["files","title","type","mode","width"],data:function(){return{viewerOptions:{navbar:!1,toolbar:!1,tooltip:!1,movable:!1,rotatable:!1,scalable:!1,transition:!1,fullscreen:!1,keyboard:!1}}},methods:{onFileChange:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((c=t.target.files||t.dataTransfer.files).length){r.next=3;break}return r.abrupt("return");case 3:return l=new FormData,Object.keys(c).forEach((function(t){l.append("files",c[t])})),r.next=7,e.$axios.$post(e.$config.baseURL+"/file/upload",l,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.files||(e.files=[]),(n=e.files).push.apply(n,Object(o.a)(r));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.error(t)}));case 7:e.$refs.newImage.value="";case 8:case"end":return r.stop()}}),r)})))()},openImage:function(t){this.$viewerApi({images:[this.$config.baseURL+"/file/"+t],options:this.viewerOptions})},removeImage:function(t){confirm("Вы уверены?")&&this.files.splice(t,1)}}}),l=c,d=(r(597),r(46)),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;return e("b-form-group",{attrs:{label:t.title}},[e("div",{staticClass:"d-flex flex-wrap"},[t._l(t.files,(function(r,o){return e("div",{key:o,staticClass:"image-container border overflow-hidden rounded d-flex align-items-center justify-content-center mr-2 mb-2 position-relative",style:t.width?"width: calc("+t.width+"% - 0.5rem)":"width: 134px"},[e("div",{staticClass:"image-container__btns"},[r.mimetype&&r.mimetype.includes("image")?e("span",{staticClass:"image-container__open image-container__btn text-white p-2",on:{click:function(e){return t.openImage(r.name)}}},[e("font-awesome-icon",{attrs:{icon:"magnifying-glass-plus"}})],1):t._e(),t._v(" "),r.mimetype.includes("image")?t._e():e("a",{staticClass:"image-container__delete image-container__btn text-white p-2",attrs:{href:t.$config.baseURL+"/file/"+r.name,download:"",target:"_blank"}},[e("font-awesome-icon",{attrs:{icon:"download"}})],1),t._v(" "),"viewing"!=t.mode?e("span",{staticClass:"image-container__delete image-container__btn text-white p-2 ml-1",on:{click:function(e){return t.removeImage(o)}}},[e("font-awesome-icon",{attrs:{icon:"trash"}})],1):t._e()]),t._v(" "),r.mimetype&&r.mimetype.includes("image")?e("img",{staticClass:"image-container__shadow image-container__img",attrs:{src:t.$config.baseURL+"/file/"+r.name}}):e("div",{staticClass:"image-container__shadow w-100 h-100 d-flex align-items-center justify-content-center"},[e("div",{staticClass:"text-center w-100 mt-3"},[e("font-awesome-icon",{staticClass:"text-secondary h2 mb-0",attrs:{icon:"pdf"==r.extname?"file-pdf":"file"}}),t._v("\n\t\t\t\t\tвв\n\t\t\t\t\t"),e("small",{staticClass:"d-inline-block w-100 text-truncate p-2"},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("capitalize")(r.original))+"\n\t\t\t\t\t")])],1)])])})),t._v(" "),"viewing"!=t.mode?e("div",{staticClass:"image-container image-container_loader rounded d-flex align-items-center justify-content-center mb-2",style:t.width?"width: calc("+t.width+"% - 0.5rem)":"width: 134px",attrs:{title:"Выбрать файл"},on:{click:function(e){return t.$refs.newImage.click()}}},[e("div",{staticClass:"image-container__icon font-family-fl opacity"},[t._v("+")]),t._v(" "),e("div",{staticStyle:{"padding-bottom":"100%"}})]):t._e(),t._v(" "),e("input",{ref:"newImage",staticClass:"d-none",attrs:{type:"file",multiple:""},on:{change:function(e){return t.onFileChange(e)}}})],2)])}),[],!1,null,null,null);e.default=component.exports},608:function(t,e,r){"use strict";r.r(e);r(4),r(69),r(5),r(2),r(1),r(6),r(3),r(7);var o=r(0),n=r(26);r(17),r(74);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={fetch:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"==t.$route.params.id){e.next=4;break}return e.next=3,t.$axios.$get(t.$config.baseURL+"/product/"+t.$route.params.id);case 3:t.product=e.sent;case 4:case"end":return e.stop()}}),e)})))()},data:function(){return{product:{},productTypeOptions:[{text:"Кофе",value:"coffee"},{text:"Чай",value:"tea"},{text:"Аксессуары",value:"accessory"}],productTypeOfTeaOptions:["Зеленый","Черный","Красный фруктовый","Матча"]}},created:function(){this.product.type=this.$route.query.type},methods:{submit:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"new"!=t.$route.params.id){e.next=8;break}return e.next=4,t.$axios.$post(t.$config.baseURL+"/product/",l(l({},t.product),{},{files:null===(r=t.product.files)||void 0===r?void 0:r.map((function(i){return i.id}))}));case 4:o=e.sent,t.$router.push("/products/"+o.id),e.next=11;break;case 8:return e.next=10,t.$axios.$patch(t.$config.baseURL+"/product/"+t.$route.params.id,l(l({},t.product),{},{files:null===(n=t.product.files)||void 0===n?void 0:n.map((function(i){return i.id}))}));case 10:t.$bvToast.toast("Товар сохранен",{title:"Успешно",variant:"success"});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t.$store.commit("setError",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()}}},f=r(46),component=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"py-4"},[e("h3",{staticClass:"mb-4"},[t._v("\n\t\tРедактирование товара:\n\t\t"),e("n-link",{attrs:{to:"/products/"+t.product.id}},[t._v(t._s(t.product.title))])],1),t._v(" "),e("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("b-form-group",{attrs:{label:"Тип товара:"}},[e("b-form-select",{attrs:{value:t.product.type,options:t.productTypeOptions,disabled:!!t.product.type},on:{change:function(e){return t.$set(t.product,"type",e)}}})],1),t._v(" "),e("b-form-group",{attrs:{label:"Название:"}},[e("b-form-input",{attrs:{trim:""},model:{value:t.product.title,callback:function(e){t.$set(t.product,"title",e)},expression:"product.title"}})],1),t._v(" "),e("b-form-group",{attrs:{label:"Цена, р:"}},[e("b-form-input",{attrs:{type:"number",trim:""},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",t._n(e))},expression:"product.price"}})],1),t._v(" "),e("b-form-group",{attrs:{label:"Количество(наличие), шт:"}},[e("b-form-input",{attrs:{type:"number",trim:""},model:{value:t.product.quantity,callback:function(e){t.$set(t.product,"quantity",t._n(e))},expression:"product.quantity"}})],1),t._v(" "),e("b-form-group",{attrs:{label:"Активность:"}},[e("b-form-checkbox",{model:{value:t.product.active,callback:function(e){t.$set(t.product,"active",e)},expression:"product.active"}},[t.product.active?e("span",[t._v("Активен")]):e("span",[t._v("Не активен")])])],1),t._v(" "),e("b-form-group",{attrs:{label:"Описание:"}},[e("b-form-textarea",{attrs:{rows:"8"},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1),t._v(" "),e("ImageLoader",{attrs:{title:"Файлы:",files:t.product.files}})],1),t._v(" "),e("div",{staticClass:"col"},[e("h5",[t._v("Характеристики")]),t._v(" "),e("div",[e("b-form-group",{attrs:{label:"Страна:"}},[e("b-form-input",{attrs:{trim:""},model:{value:t.product.country,callback:function(e){t.$set(t.product,"country",e)},expression:"product.country"}})],1),t._v(" "),e("b-form-group",{attrs:{label:"Вес, г:"}},[e("b-form-input",{attrs:{type:"number",trim:""},model:{value:t.product.weight,callback:function(e){t.$set(t.product,"weight",t._n(e))},expression:"product.weight"}})],1)],1),t._v(" "),"tea"==t.product.type?e("div",[e("b-form-group",{attrs:{label:"Тип чая:"}},[e("b-form-select",{attrs:{options:t.productTypeOfTeaOptions},model:{value:t.product.typeOfTea,callback:function(e){t.$set(t.product,"typeOfTea",e)},expression:"product.typeOfTea"}})],1)],1):t._e(),t._v(" "),"coffee"==t.product.type?e("div",[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("b-form-group",{attrs:{label:"Арабика:"}},[e("b-form-input",{attrs:{type:"number",max:"100",trim:""},model:{value:t.product.arabica,callback:function(e){t.$set(t.product,"arabica",t._n(e))},expression:"product.arabica"}})],1)],1),t._v(" "),e("div",{staticClass:"col"},[e("b-form-group",{attrs:{label:"Робуста:"}},[e("b-form-input",{attrs:{type:"number",max:"100",trim:""},model:{value:t.product.robusta,callback:function(e){t.$set(t.product,"robusta",t._n(e))},expression:"product.robusta"}})],1)],1)]),t._v(" "),e("b-form-checkbox",{model:{value:t.product.espresso,callback:function(e){t.$set(t.product,"espresso",e)},expression:"product.espresso"}},[t._v("Эспрессо")]),t._v(" "),e("div",{staticClass:"pl-3 mb-3"},[e("b-form-checkbox",{model:{value:t.product.carobCoffeeMachine,callback:function(e){t.$set(t.product,"carobCoffeeMachine",e)},expression:"product.carobCoffeeMachine"}},[t._v("\n\t\t\t\t\t\t\tРожковая кофе машина\n\t\t\t\t\t\t")]),t._v(" "),e("b-form-checkbox",{model:{value:t.product.superMachine,callback:function(e){t.$set(t.product,"superMachine",e)},expression:"product.superMachine"}},[t._v("\n\t\t\t\t\t\t\tСупер автомат\n\t\t\t\t\t\t")]),t._v(" "),e("b-form-checkbox",{model:{value:t.product.vending,callback:function(e){t.$set(t.product,"vending",e)},expression:"product.vending"}},[t._v("Вендинг")])],1),t._v(" "),e("b-form-checkbox",{model:{value:t.product.alternative,callback:function(e){t.$set(t.product,"alternative",e)},expression:"product.alternative"}},[t._v("Альтернатива")]),t._v(" "),e("div",{staticClass:"pl-3 mb-3"},[e("b-form-checkbox",{model:{value:t.product.funnel,callback:function(e){t.$set(t.product,"funnel",e)},expression:"product.funnel"}},[t._v("Воронка")]),t._v(" "),e("b-form-checkbox",{model:{value:t.product.aeropress,callback:function(e){t.$set(t.product,"aeropress",e)},expression:"product.aeropress"}},[t._v("Аэропресс")]),t._v(" "),e("b-form-checkbox",{model:{value:t.product.chemex,callback:function(e){t.$set(t.product,"chemex",e)},expression:"product.chemex"}},[t._v("Кемекс")]),t._v(" "),e("b-form-checkbox",{model:{value:t.product.frenchPress,callback:function(e){t.$set(t.product,"frenchPress",e)},expression:"product.frenchPress"}},[t._v("Френч-пресс")]),t._v(" "),e("b-form-checkbox",{model:{value:t.product.dripCoffeeMaker,callback:function(e){t.$set(t.product,"dripCoffeeMaker",e)},expression:"product.dripCoffeeMaker"}},[t._v("\n\t\t\t\t\t\t\tКапельная кофеварка\n\t\t\t\t\t\t")]),t._v(" "),e("b-form-checkbox",{model:{value:t.product.geyserCoffeeMaker,callback:function(e){t.$set(t.product,"geyserCoffeeMaker",e)},expression:"product.geyserCoffeeMaker"}},[t._v("\n\t\t\t\t\t\t\tГейзерная кофеварка\n\t\t\t\t\t\t")]),t._v(" "),e("b-form-checkbox",{model:{value:t.product.turk,callback:function(e){t.$set(t.product,"turk",e)},expression:"product.turk"}},[t._v(" Турка ")])],1)],1):t._e()]),t._v(" "),e("div",{staticClass:"col-12 d-flex justify-content-between"},[e("b-button",{attrs:{variant:"dark",type:"submit"}},[t._v("Сохранить")])],1)])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ImageLoader:r(602).default})}}]);